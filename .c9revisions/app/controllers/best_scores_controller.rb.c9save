{"ts":1371035133978,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"class BestScoresController < ApplicationController\n  before_filter :require_api_access\n  before_filter :set_leaderboard\n\n  def index\n    x = params.delete(:page_num)\n    y = params.delete(:num_per_page)\n    @scores = Score.bests_for(params[:leaderboard_range], @leaderboard.id, {page_num: x, num_per_page: y})\n    ActiveRecord::Associations::Preloader.new(@scores, [:user]).run\n    render json: @scores.to_json(:include => :user, :methods => [:value, :rank])\n  end\n  \n  def user\n    @score = Score.best_for(params[:leaderboard_range], @leaderboard.id, params[:user_id])\n    ActiveRecord::Associations::Preloader.new(@score, [:user]).run\n    render json: @score.to_json(:include => :user, :methods => [:value, :rank])\n  end\n\n  private\n  def set_leaderboard\n    @leaderboard = current_app.leaderboards.find_by_id(params.delete(:leaderboard_id))\n    unless @leaderboard\n      render status: :forbidden, json: {message: \"Pass a leaderboard_id that belongs to the app associated with app_key\"}\n    end\n  end\nend\n"]],"start1":0,"start2":0,"length1":0,"length2":1007}]],"length":1007}
